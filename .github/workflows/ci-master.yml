name: Builder
on:
  pull_request:
      branches:
        - dev

jobs:
  install-dependencies:
    name: Install dependencies
    uses: ./.github/workflows/install-dependencies.yml@feature/ci/reusable-workflows
  lint:
    name: Lint
    needs: install-dependencies
    uses: ./.github/workflows/lint.yml@feature/ci/reusable-workflows
  prettier:
    name: Prettier
    needs: install-dependencies
    uses: ./.github/workflows/prettier.yml@feature/ci/reusable-workflows
  openapi:
    name: Verify OpenAPI Definition
    needs: install-dependencies
    uses: ./.github/workflows/validate-swagger.yml@feature/ci/reusable-workflows
  check-types:
    name: Verify Compilation
    needs: install-dependencies
    uses: ./.github/workflows/compile-ts.yml@feature/ci/reusable-workflows
  build-app:
    name: Build App
    needs: [lint, prettier, openapi, check-types]
    uses: ./.github/workflows/build-app.yml@feature/ci/reusable-workflows
  build-front:
    name: Build Front
    needs: [lint, prettier, openapi, check-types]
    uses: ./.github/workflows/build-front.yml@feature/ci/reusable-workflows
  build-api:
    name: Build API
    needs: [lint, prettier, openapi, check-types]
    uses: ./.github/workflows/build-api.yml@feature/ci/reusable-workflows
